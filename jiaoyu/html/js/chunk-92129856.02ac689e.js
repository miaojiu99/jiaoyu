(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92129856"],{"3ad6":function(t,a,e){},"7c78":function(t,a,e){"use strict";var i=e("3ad6"),n=e.n(i);n.a},e82f:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"details"},[e("van-nav-bar",{attrs:{title:"老师详情",fit:"cover",fixed:"","left-arrow":"","z-index":99},on:{"click-left":function(a){return t.$router.go(-1)}}}),e("van-image",{staticStyle:{"margin-top":"19vw"},attrs:{width:"100vw",height:"40vw",src:t.obj_data.avatar}}),e("div",{staticClass:"details-header"},[e("div",{staticClass:"details-header-desc"},[e("h3",[t._v(t._s(t.obj_data.name)+"老师")]),1==t.activeAttention?e("van-button",{staticClass:"tag-btn",attrs:{plain:"",type:"primary",size:"normal"},on:{click:t.onAttention}},[t._v("已关注")]):e("van-button",{staticClass:"tag-btn",attrs:{type:"primary",size:"normal"},on:{click:t.onAttention}},[t._v("关注")])],1),e("p",{staticClass:"details-header-phone"},[t._v("手机号:"+t._s(t.obj_data.phone))])]),0==t.obj_data.write?e("van-button",{staticClass:"details-buy",attrs:{round:"",type:"info"},on:{click:function(a){t.show=!0}}},[t._v("购买 ￥"+t._s(t.obj_data.money))]):t._e(),e("van-tabs",{model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("van-tab",{attrs:{title:"个人介绍"}},[e("p",{staticClass:"details-header-message"},[t._v("\n        "+t._s(t.obj_data.message)+"\n      ")])]),e("van-tab",{attrs:{title:"文章列表"}},t._l(t.articleList,(function(a,i){return e("div",{key:i,staticClass:"article van-hairline--bottom"},[e("div",{staticClass:"article-time"},[e("span",{staticClass:"post"},[t._v("专栏")]),e("span",{staticClass:"name"},[t._v(t._s(a.name))]),e("span",[t._v(t._s(a.create_time))])]),e("p",{staticClass:"article-title van-ellipsis"},[t._v(t._s(a.title))])])})),0),e("van-tab",{attrs:{title:"评价"}},t._l(t.commentList,(function(a,i){return e("div",{key:i,staticClass:"details-container van-hairline--bottom"},[e("div",{staticClass:"details-container-flex"},[e("div",{staticClass:"details-container-img"},[e("img",{attrs:{src:a.avatar}})]),e("div",{staticClass:"details-container-name"},[e("div",[e("p",{staticClass:"details-name"},[t._v("用户名")]),e("van-rate",{attrs:{size:".4rem",readonly:""},model:{value:a.number,callback:function(e){t.$set(a,"number",e)},expression:"i.number"}}),e("div",{staticStyle:{"margin-top":"4vw"}},[t._v(t._s(a.message))])],1),e("span",{staticClass:"time"},[t._v(t._s(a.create_time))])])])])})),0)],1),e("van-popup",{model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("div",{staticClass:"popup"},[e("van-cell",{attrs:{title:"支付总额",value:"¥"+t.obj_data.money}}),e("van-radio-group",{model:{value:t.radio,callback:function(a){t.radio=a},expression:"radio"}},[e("van-cell-group",[e("van-cell",{attrs:{title:"微信",icon:"comm2 iconfont iconweixinzhifu",clickable:""},on:{click:function(a){t.radio="1"}}},[e("van-radio",{attrs:{slot:"right-icon",name:"1"},slot:"right-icon"})],1),e("van-cell",{attrs:{title:"支付宝",icon:"comm iconfont iconzhifubao",clickable:""},on:{click:function(a){t.radio="2"}}},[e("van-radio",{attrs:{slot:"right-icon",name:"2"},slot:"right-icon"})],1)],1)],1),e("van-button",{attrs:{type:"info",size:"large"},on:{click:t.onConfirm}},[t._v("确认支付")])],1)])],1)},n=[],o=(e("ac4d"),e("8a81"),e("ac6a"),e("365c")),s={data:function(){return{active:0,show:!1,radio:"",activeAttention:0,teacherId:"",obj_data:"",articleList:"",commentList:""}},mounted:function(){var t=this;setTimeout((function(){t.init(),t.openWrite(),t.comment()}),500)},methods:{init:function(){var t=this,a=this.$route.query.id;this.teacherId=a;var e=window.localStorage.getItem("userID"),i={teacherId:a,userId:e};Object(o["o"])(i).then((function(a){if(console.log(a),1==a.code){var e=a.data;0==e.focus?t.activeAttention=0:t.activeAttention=1,e.avatar=Object(o["m"])()+e.avatar,t.obj_data=e}else t.$toast(a.msg)}))},openWrite:function(){var t=this,a={teacherId:this.teacherId};Object(o["M"])(a).then((function(a){1==a.code&&(t.articleList=a.data)}))},onPage:function(t){console.log(t),window.api.openWin({name:(new Date).getTime(),url:t,reload:!0,bgColor:"#000",vScrollBarEnabled:!1,slidBackEnabled:!1,bounces:!1,animation:{type:"movein",subType:"from_right",duration:300}})},comment:function(){var t=this,a={teacherId:this.teacherId};Object(o["z"])(a).then((function(a){if(1==a.code){var e=a.data,i=!0,n=!1,s=void 0;try{for(var c,r=e[Symbol.iterator]();!(i=(c=r.next()).done);i=!0){var l=c.value;l.avatar=Object(o["m"])()+l.avatar}}catch(d){n=!0,s=d}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}t.commentList=e}}))},onConfirm:function(){this.show=!1;var t={userId:window.localStorage.getItem("userID"),teacherId:this.teacherId,type:this.radio};1==this.radio&&Object(o["a"])(t).then((function(t){if(1==t.code){var a=t.data,e=window.api.require("wxPay");e.payOrder({apiKey:a.appid,orderId:a.prepayid,mchId:a.partnerid,nonceStr:a.noncestr,timeStamp:a.timestamp,package:a.package,sign:a.sign},(function(t,a){console.log(JSON.stringify(t))}))}})),2==this.radio&&Object(o["a"])(t).then((function(t){if(1==t.code){var a=window.api.require("aliPay");a.payOrder({orderInfo:t.data},(function(t,a){console.log(JSON.stringify(t))}))}}))},onAttention:function(){var t=this,a={userId:window.localStorage.getItem("userID"),teacherId:this.teacherId};Object(o["k"])(a).then((function(a){t.$toast(a.msg),1==a.code&&(0==t.activeAttention?t.activeAttention=1:t.activeAttention=0)}))}}},c=s,r=(e("7c78"),e("2877")),l=Object(r["a"])(c,i,n,!1,null,null,null);a["default"]=l.exports}}]);